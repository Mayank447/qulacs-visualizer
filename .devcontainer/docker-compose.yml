version: "3"
services:
  main:
    container_name: vcs-qulacs-visualizer
    build:
      context: .
      dockerfile: Dockerfile
      args:
        USERNAME: vscode
        # Reads values from .env generated by init.sh.
        # Match container's UID/GID with the host's.
        UID: $UID
        GID: $GID
    tty: true
    volumes:
      - type: bind
        source: ..
        target: /workspaces/qulacs-visualizer
      - type: volume
        source: qulacs-visualizer-venv
        target: /workspaces/qulacs-visualizer/.venv
        volume:
          nocopy: true
    command: /bin/sh -c "while sleep 1000; do :; done"

volumes:
  qulacs-visualizer-venv:
